/** @license React vundefined
 * react-interactions-events/focus.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';var g=require("react"),h=!0,k="undefined"!==typeof window&&null!=window.navigator?/^Mac/.test(window.navigator.platform):!1,l=["focus","blur","detachedvisiblenode"],m="undefined"!==typeof window&&null!=window.PointerEvent?["keydown","keyup","pointermove","pointerdown","pointerup"]:"keydown keyup mousedown touchmove touchstart touchend".split(" ");function n(a){return"function"===typeof a}
function p(a,d,c,b){return{target:c,type:d,pointerType:b,timeStamp:a.getTimeStamp(),continuePropagation:function(){a.continuePropagation()}}}function q(a,d,c,b){a=a.type;h=!1;c=c.focusTarget;null===c||!d.isTargetWithinResponderScope(c)||"mousedown"!==a&&"touchstart"!==a&&"pointerdown"!==a||b(!1)}
function r(a,d,c,b){switch(a.type){case "pointermove":case "pointerdown":case "pointerup":c.pointerType=a.nativeEvent.pointerType;q(a,d,c,b);break;case "keydown":case "keyup":var e=c.focusTarget;a=a.nativeEvent;var f=a.altKey,y=a.ctrlKey;a.metaKey||!k&&f||y||(c.pointerType="keyboard",h=!0,null!==e&&d.isTargetWithinResponderScope(e)&&b(!0));break;case "touchmove":case "touchstart":case "touchend":c.pointerType="touch";c.isEmulatingMouseEvents=!0;q(a,d,c,b);break;case "mousedown":c.isEmulatingMouseEvents?
c.isEmulatingMouseEvents=!1:(c.pointerType="mouse",q(a,d,c,b))}}function t(a,d,c){var b=c.pointerType,e=c.focusTarget,f=d.onBlur;n(f)&&(b=p(a,"blur",e,b),a.dispatchEvent(b,f,0));f=d.onFocusChange;n(f)&&a.dispatchEvent(!1,f,0);c.isFocusVisible&&u(a,d,!1)}function u(a,d,c){d=d.onFocusVisibleChange;n(d)&&a.dispatchEvent(c,d,0)}
var v=g.unstable_createResponder("Focus",{targetEventTypes:l,targetPortalPropagation:!0,rootEventTypes:m,getInitialState:function(){return{focusTarget:null,isEmulatingMouseEvents:!1,isFocused:!1,isFocusVisible:!1,pointerType:""}},onEvent:function(a,d,c,b){var e=a.type,f=a.target;if(c.disabled)b.isFocused&&(t(d,c,b),b.isFocused=!1,b.focusTarget=null);else switch(e){case "focus":b.focusTarget=d.getResponderNode();b.isFocused||b.focusTarget!==f||(b.isFocused=!0,b.isFocusVisible=h,e=b.pointerType,f=b.focusTarget,
a=c.onFocus,n(a)&&(e=p(d,"focus",f,e),d.dispatchEvent(e,a,0)),a=c.onFocusChange,n(a)&&d.dispatchEvent(!0,a,0),b.isFocusVisible&&u(d,c,!0));b.isEmulatingMouseEvents=!1;break;case "blur":b.isFocused&&(t(d,c,b),b.isFocusVisible=h,b.isFocused=!1),null==a.nativeEvent.relatedTarget&&(b.pointerType=""),b.isEmulatingMouseEvents=!1}},onRootEvent:function(a,d,c,b){r(a,d,b,function(a){b.isFocused&&b.isFocusVisible!==a&&(b.isFocusVisible=a,u(d,c,a))})},onUnmount:function(a,d,c){c.isFocused&&t(a,d,c)}});
function w(a,d,c,b){var e=d.onFocusWithinChange;n(e)&&a.dispatchEvent(b,e,0);c.isFocusVisible&&(d=d.onFocusWithinVisibleChange,n(d)&&a.dispatchEvent(b,d,0))}
var x=g.unstable_createResponder("FocusWithin",{targetEventTypes:l,targetPortalPropagation:!0,rootEventTypes:m,getInitialState:function(){return{focusTarget:null,isEmulatingMouseEvents:!1,isFocused:!1,isFocusVisible:!1,pointerType:""}},onEvent:function(a,d,c,b){var e=a.type,f=a.nativeEvent.relatedTarget;if(c.disabled)b.isFocused&&(w(d,c,b,!1),b.isFocused=!1,b.focusTarget=null);else switch(e){case "focus":b.focusTarget=d.getResponderNode();b.isFocused||(b.isFocused=!0,b.isFocusVisible=h,w(d,c,b,!0));
!b.isFocusVisible&&h&&(b.isFocusVisible=h,e=c.onFocusWithinVisibleChange,n(e)&&d.dispatchEvent(!0,e,0));e=b.pointerType;b=b.focusTarget||a.target;c=c.onFocusWithin;n(c)&&(b=p(d,"focuswithin",b,e),d.dispatchEvent(b,c,0));break;case "blur":b.isFocused&&!d.isTargetWithinResponder(f)&&(w(d,c,b,!1),e=b.pointerType,a=b.focusTarget||a.target,c=c.onBlurWithin,n(c)&&(a=p(d,"blurwithin",a,e),d.dispatchEvent(a,c,0)),b.isFocused=!1);break;case "detachedvisiblenode":c=c.onDetachedVisibleNode,n(c)&&(b=p(d,"detachedvisiblenode",
a.target,b.pointerType),d.dispatchEvent(b,c,0))}},onRootEvent:function(a,d,c,b){r(a,d,b,function(a){if(b.isFocused&&b.isFocusVisible!==a){b.isFocusVisible=a;var e=c.onFocusWithinVisibleChange;n(e)&&d.dispatchEvent(a,e,0)}})},onUnmount:function(a,d,c){c.isFocused&&w(a,d,c,!1)}});module.exports={FocusResponder:v,useFocus:function(a){return g.unstable_useResponder(v,a)},FocusWithinResponder:x,useFocusWithin:function(a){return g.unstable_useResponder(x,a)}};
